There are a number of caveats, conditions, and gotchas when it comes to z-index - most notably that a z-index "context" can't be a sandwich. That is to say, an element can't be layered between two other elements unless they share a parent. Our "stack" of elements looked like this: at the bottom is the background, then the main essay text, the images, and essay gallery; then the header; then the page title, and finally, the page sub-title, either the author's name, or the parent essay title. So, if the header needs to be between the body text and the title, that means we have to bury the header in the body of the essay - a bad design practice - or we raise the level of the shared parent in the HTML ("DOM") hierarchy. In other words, the page title had to be outside the essay; it exists as an independent child to the body, on the same level as the header, sidebar, and main content section. Even with that refactoring, the elements have to be loaded in an deliberate order for them to stack naturally.

Next was the size change - while perhaps a flourish or a victory lap, we felt that it gave that same sense of motion as the scroll effect. This was even more complex than the layering issue. The intuitive solution for this behavior is to bind the font size to the scroll position - but this would've been the least performant approach: when you change the size of the font, the browser has to repaint the entire page, since it has to recalculate the page layout to account for the space the newly-resized text will require. As the font size change needed to feel smooth and natural, the font would have to be resized at every pixel between the maximum and minimum sizes - which, at a range from approximately 30px to 60px means 30 repaints across a scroll of about 70% of the window's height.

The more performant approach is to use the transform: scale() property, which doesn't change the font size at all, but instead magnifies the entire HTML element - while not actually changing the amount of space it takes up on the page. As a result, the text is provided the same space at scale(3x) as at scale(1x) - so it is challenging to position the layouts relative to their neighbors in such a way that the presentation is acceptable at minimum and maximum size - and everything in between. Adding to the complexity: the title text ranges from 2 words to as many as 9 or 10, so we also had to account for the title next needing to wrap when it was in its largest state (and not display on top of other elements), or needing to clip with an ellipsis when it is positioned in the header.

In the end, we went with a 2x to 1x scaling, since the "sticky" positioning of the text at its smallest position, at the top of the page, requires more precision than its positioning in its largest form - even a discrepancy of one or two pixels caused a noticeable misalignment in the header, and, since a pixel is an atomic size, trying to attain pixel-perfect positioning at a 0.5x scale factor was, to put it simply, sus.

The impact on the sidebar is significant because it was our intention to show and hide the sidebar depending on screen width. Due to the title text's position outside of the normal DOM flow, it was not bound to the essay text, so, when the essay text is repositioned to hide or show the sidebar, the title text had to be explicitly included. However, because the title text doesn't technically resize - the container its in is the same size whether the text is large or small - the text would not automatically wrap when it was pushed to the side by the reappearing sidebar. Not only did we have to explicitly reposition the title text to align with the body text, we also had to resize its container - but, of course, this size could not be the same as the width of the essay text's container, because the title is displaying at twice the size - so, if the essay text is using 60% of the screen, the title had to take up 30%;
